<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: uploadBills.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: uploadBills.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>//doesnt really work as intended

//input the amount you want

//split

//store local storage for the time being

/**
 * Function to load all groups that the user is a member of
 */
function loadGroups() {
  let groupArray = JSON.parse(localStorage.getItem("groupList"));
  groupArray.forEach(element => {
    let array = JSON.parse(element);
    let users = JSON.parse(array[1]);
    users.forEach(e => {
      if (e == localStorage.getItem("Username")) {
        const name = array[0];
        const element = document.getElementById("listOfGroups");
        const newElement = document.createElement("a");
        newElement.textContent = name;
        newElement.href = "#!";
        newElement.className = "collection-item waves-effect waves-light";
        newElement.addEventListener("click", selectGroup);
        element.appendChild(newElement);
      }
    })
  });
  
  /**
   * Function to store the group that is clicked on
   * @param {*} e Clicked element
   */
  function selectGroup(e) {
    localStorage.setItem("usersToBill", JSON.stringify([]));
    localStorage.setItem("groupToLoad", e.target.textContent);
    document.getElementById("groupSelection").style.display = "none";
    document.getElementById("userSelection").style.display = "block";
    loadUserList();
  }

}

/**
 * Function to store the user that is clicked on
 * @param {*} e Clicked element 
 */
function addSelectedNames(e) {
  let currentUsersAdded = JSON.parse(localStorage.getItem("usersToBill"));

  let contains = false;

  for (let i = 0; i &lt; currentUsersAdded.length; i++) {
    if (currentUsersAdded[i] === e.target.textContent) {
      contains = true;
      alert("User already selected");
      break;
    }
  }

  if (!contains) {
    currentUsersAdded.push(e.target.textContent);
    localStorage.setItem("usersToBill", JSON.stringify(currentUsersAdded));
  }
}
/**
 * Function to select every user that is a member of the group
 */
function selectAll() {
  let userArray = [];
  let groupToLoad = localStorage.getItem("groupToLoad");
  let groupArray = JSON.parse(localStorage.getItem("groupList"));
  groupArray.forEach(element => {
    let array = JSON.parse(element);
    if (array[0] == groupToLoad) {
      let users = JSON.parse(array[1]);
      users.forEach(element => userArray.push(element));
    }
  });
  localStorage.setItem("usersToBill", JSON.stringify(users));
  hideUsers();
}

/**
 * Function to load all users of that group
 */
function loadUserList() {
  let groupToLoad = localStorage.getItem("groupToLoad");
  let groupArray = JSON.parse(localStorage.getItem("groupList"));
  groupArray.forEach(element => {
    let array = JSON.parse(element);
    if (array[0] == groupToLoad) {
      let users = JSON.parse(array[1]);
      users.forEach(element => {
        const oldElement = document.getElementById("listofUsers");
        const newElement = document.createElement("a");
        newElement.textContent = element;
        newElement.href = "#!";
        newElement.className = "collection-item waves-effect waves-light";
        newElement.addEventListener("click", addSelectedNames);
        oldElement.appendChild(newElement);
      })
    }
  });
}

//check if selected users is emptyu
/**
 * Function to hide the user selection section and display the adding bill section
 */
function hideUsers () {
  if (JSON.parse(localStorage.getItem("usersToBill")).length == 0) {
    alert("Please select a user");
  } else {
    document.getElementById("userSelection").style.display = "none";
    document.getElementById("addingTheBill").style.display = "block";
  }
}

/**
 * Boot function with all things that need to be completed on load
 */

function boot() {
  loadGroups();
  

  window.selectAllBtn.addEventListener("click", selectAll);
  window.nextBtn.addEventListener("click", hideUsers);


  document.getElementById("userSelection").style.display = "none";
  document.getElementById("addingTheBill").style.display = "none";

}

window.addEventListener("load", boot);</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#addSelectedNames">addSelectedNames</a></li><li><a href="global.html#boot">boot</a></li><li><a href="global.html#hideUsers">hideUsers</a></li><li><a href="global.html#loadGroups">loadGroups</a></li><li><a href="global.html#loadUserList">loadUserList</a></li><li><a href="global.html#selectAll">selectAll</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.3</a> on Wed Mar 25 2020 16:02:42 GMT+0000 (Greenwich Mean Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
