<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: createAccountScript.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: createAccountScript.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Function to check on the criteria for creating account
 */

function checkCriteria() {
    let username = document.getElementById("username").value;
    let password = document.getElementById("password").value;
    let passCheck = document.getElementById("confirmPassword").value
    let existingNames = getListOfNames();

    if (existingNames.filter(e => e == username) == "") {
        if (password === passCheck &amp;&amp; password != null &amp;&amp; password != "") {
            createAccount(username, password);
        } else {
            console.log("password invalid");
        }
    } else {
        console.log("username already exists");
    }

}

/**
 * Function to return a list of current existing usernames to use in the check criteria function
 */


function getListOfNames() {
    let names = []
    const nameArray = JSON.parse(localStorage.getItem("login-details"));
    nameArray.forEach(e => {
        const array = JSON.parse(e);
        names.push(array[0]);
    })
    return names;
}

/**
 * Function to create an account that uses the check criteria function to determine if the account is valid
 * @param {*} username Username input
 * @param {*} password Password input
 */

function createAccount(username, password) {
    //functinoallity required to check if username already exists
    let detailsArray = JSON.parse(localStorage.getItem("login-details"));

    let wrapper = [username, password]

    detailsArray.push(JSON.stringify(wrapper))

    localStorage.setItem("login-details", JSON.stringify(detailsArray));
    
    let users = JSON.parse(localStorage.getItem("userList"));
    users.push(username);
    localStorage.setItem("userList", JSON.stringify(users));

    localStorage.setItem("Username", username);
    console.log("Account created");
    login();
}

function login() {
    window.location.href = "home.html";
}

/**
 * Boot function with all things that need to be completed on load
 */

function boot() {
    window.createBtn.addEventListener("click", checkCriteria);
}

window.addEventListener("load", boot);</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#boot">boot</a></li><li><a href="global.html#checkCriteria">checkCriteria</a></li><li><a href="global.html#createAccount">createAccount</a></li><li><a href="global.html#getListOfNames">getListOfNames</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.3</a> on Wed Mar 25 2020 16:01:16 GMT+0000 (Greenwich Mean Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
