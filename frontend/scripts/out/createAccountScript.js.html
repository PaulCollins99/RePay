<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: createAccountScript.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: createAccountScript.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Function to check on the criteria for creating account and call the creation function
 */

function checkCriteria() {
    let username = document.getElementById("username").value;
    let password = document.getElementById("password").value;
    let passCheck = document.getElementById("confirmPassword").value;
    let email = document.getElementById("email").value;
    let existingNames = getListOfNames();

    if (existingNames.filter(e => e == username) == "") {
        if (password === passCheck &amp;&amp; password != null &amp;&amp; password != "") {
            if (email != "" &amp; email != null &amp;&amp; emailIsValid(email)) {
                createAccount(base54It(username), base54It(password), base54It(email));
            }
            else {
                alert("Email Invalid")
            }
        } else {
            alert("Password Invalid");
        }
    } else {
        alert("Username already exists");
    }

}

/**
 * Function that converts the item parsed in and returns a base64 equivilant
 * @param {*} item Item to be converted into base64 
 */

function base64It (item) {
    return btoa(item)
} 

/**
 * A function to check the basic syntac of the emai entered matches _@_._
 * @param {*} email Email to be checked 
 */

function emailIsValid (email) {
    return /\S+@\S+\.\S+/.test(email)
}


/**
 * Function to return a list of current existing usernames to use in the check criteria function
 */


function getListOfNames() {
    let names = []
    const nameArray = JSON.parse(localStorage.getItem("login-details"));
    nameArray.forEach(e => {
        const array = JSON.parse(e);
        names.push(array[0]);
    })
    return names;
}

/**
 * Function to create an account that uses the check criteria function to determine if the account is valid
 * @param {*} username Username input
 * @param {*} password Base64 Password input
 * @param {*} email Base64 Email Input
 */

function createAccount(username, password, email) {
    //functinoallity required to check if username already exists
    let detailsArray = JSON.parse(localStorage.getItem("login-details"));

    let wrapper = [username, password, email]

    detailsArray.push(JSON.stringify(wrapper))

    localStorage.setItem("login-details", JSON.stringify(detailsArray));

    let users = JSON.parse(localStorage.getItem("userList"));
    users.push(username);
    localStorage.setItem("userList", JSON.stringify(users));

    localStorage.setItem("Username", username);
    console.log("Account created");
    login();
}

/**
 * Function to move the user onto the home.html page
 */

function login() {
    window.location.href = "home.html";
}

/**
 * Boot function with all things that need to be completed on load
 */

function boot() {
    window.createBtn.addEventListener("click", checkCriteria);
}

window.addEventListener("load", boot);</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#base64It">base64It</a></li><li><a href="global.html#boot">boot</a></li><li><a href="global.html#checkCriteria">checkCriteria</a></li><li><a href="global.html#createAccount">createAccount</a></li><li><a href="global.html#emailIsValid">emailIsValid</a></li><li><a href="global.html#getListOfNames">getListOfNames</a></li><li><a href="global.html#login">login</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.3</a> on Fri Mar 27 2020 11:31:30 GMT+0000 (Greenwich Mean Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
